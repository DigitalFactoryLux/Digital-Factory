---
import Layout from '../layouts/Layout.astro';
import { CONTACT } from '../lib/constants';
import { tp, getLocalizedPath, type Locale } from '../i18n/utils';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const lang = locale;
---

<Layout
  title={tp('privacy', 'meta.title', lang)}
  description={tp('privacy', 'meta.description', lang)}
>
  <section class="py-20 md:py-28">
    <div class="max-w-3xl mx-auto px-4 sm:px-6">

      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8">
        {tp('privacy', 'title', lang)}
      </h1>
      <p class="text-sm text-gray-500 mb-12">{tp('privacy', 'lastUpdate', lang)}</p>

      <div class="prose prose-gray max-w-none space-y-8 text-gray-700 leading-relaxed">

        <!-- Section 1 - Data Controller -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's1.title', lang)}</h2>
          <p>
            <strong>Digital Factory Sàrl-s</strong><br />
            {tp('privacy', 's1.representedBy', lang)} <strong>G. Flores</strong>, {tp('privacy', 's1.manager', lang)}<br />
            {CONTACT.address}<br />
            {tp('privacy', 's1.email', lang) === 'E-Mail' ? 'E-Mail' : 'Email'} : <a href="mailto:g.flores@digital-factory.lu" class="text-teal-600 hover:underline">g.flores@digital-factory.lu</a>
          </p>
        </div>

        <!-- Section 2 - Data Collected -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's2.title', lang)}</h2>
          <p>{tp('privacy', 's2.intro', lang)}</p>
          <ul class="list-disc pl-6 mt-2 space-y-1">
            <li>{tp('privacy', 's2.item1', lang)}</li>
            <li>{tp('privacy', 's2.item2', lang)}</li>
            <li>{tp('privacy', 's2.item3', lang)}</li>
            <li>{tp('privacy', 's2.item4', lang)}</li>
          </ul>
          <p class="mt-3" set:html={tp('privacy', 's2.noCookies', lang)} />
        </div>

        <!-- Section 3 - Purpose -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's3.title', lang)}</h2>
          <p>{tp('privacy', 's3.intro', lang)}</p>
          <ul class="list-disc pl-6 mt-2 space-y-1">
            <li>{tp('privacy', 's3.item1', lang)}</li>
            <li>{tp('privacy', 's3.item2', lang)}</li>
          </ul>
          <p class="mt-3">{tp('privacy', 's3.note', lang)}</p>
        </div>

        <!-- Section 4 - Legal Basis -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's4.title', lang)}</h2>
          <p set:html={tp('privacy', 's4.content', lang)} />
        </div>

        <!-- Section 5 - Recipients -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's5.title', lang)}</h2>
          <p>{tp('privacy', 's5.intro', lang)}</p>
          <ul class="list-disc pl-6 mt-2 space-y-1">
            <li set:html={tp('privacy', 's5.item1', lang)} />
            <li set:html={tp('privacy', 's5.item2', lang)} />
          </ul>
          <p class="mt-3">{tp('privacy', 's5.note', lang)}</p>
        </div>

        <!-- Section 6 - Retention -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's6.title', lang)}</h2>
          <p set:html={tp('privacy', 's6.content', lang)} />
        </div>

        <!-- Section 7 - Rights -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's7.title', lang)}</h2>
          <p>{tp('privacy', 's7.intro', lang)}</p>
          <ul class="list-disc pl-6 mt-2 space-y-1">
            <li><strong>{tp('privacy', 's7.right1.name', lang)}</strong> — {tp('privacy', 's7.right1.desc', lang)}</li>
            <li><strong>{tp('privacy', 's7.right2.name', lang)}</strong> — {tp('privacy', 's7.right2.desc', lang)}</li>
            <li><strong>{tp('privacy', 's7.right3.name', lang)}</strong> — {tp('privacy', 's7.right3.desc', lang)}</li>
            <li><strong>{tp('privacy', 's7.right4.name', lang)}</strong> — {tp('privacy', 's7.right4.desc', lang)}</li>
            <li><strong>{tp('privacy', 's7.right5.name', lang)}</strong> — {tp('privacy', 's7.right5.desc', lang)}</li>
            <li><strong>{tp('privacy', 's7.right6.name', lang)}</strong> — {tp('privacy', 's7.right6.desc', lang)}</li>
          </ul>
          <p class="mt-3">
            {tp('privacy', 's7.contact', lang)}
            <a href={`mailto:${CONTACT.email1}`} class="text-teal-600 hover:underline">{CONTACT.email1}</a>
          </p>
          <p class="mt-2" set:html={tp('privacy', 's7.cnpd', lang)}>
          </p>
          <p>
            <a href="https://cnpd.public.lu" target="_blank" rel="noopener noreferrer" class="text-teal-600 hover:underline">cnpd.public.lu</a>
          </p>
        </div>

        <!-- Section 8 - Cookies -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's8.title', lang)}</h2>
          <p set:html={tp('privacy', 's8.content', lang)} />
        </div>

        <!-- Section 9 - Security -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's9.title', lang)}</h2>
          <p>{tp('privacy', 's9.content', lang)}</p>
        </div>

        <!-- Section 10 - Modifications -->
        <div>
          <h2 class="text-xl font-semibold text-gray-900 mb-3">{tp('privacy', 's10.title', lang)}</h2>
          <p>{tp('privacy', 's10.content', lang)}</p>
        </div>

      </div>
    </div>
  </section>
</Layout>
